<html><head><style>body{margin:1em auto;max-width:40em;font-family:georgia,serif;text-align:justify}pre{border-left:1px solid black;padding-left:3em}code{font-style:italic}</style></head><body>


<h3>Current goals</h3>

<p><strike>Sending packets.</strike></p>
<p><strike>Set <code>main</code> to increment tos.</strike></p>
<p>Sending forth word</p>
<p>Storing forth word</p>
<p>VM</p>


<h3>Network packet</h3>

<p>Network packet for machine code and data consists of type byte, 8 word bytes, 16-bit data length and data bytes.</p>

<pre>./ss 'A'  '*'  48 0f af 06  48 8d 76 04  c3
'A'  '*' 00 00 00 00 00 00 00     09 00  48 0f af 06  48 8d 76 04  c3</pre>
<pre>./ss 'D'  'data'  11 22 33 44
'D'  'd' 'a' 't' 'a' 00 00 00 00  04 00  11 22 33 44</pre>


<p>Network packet for forth word consists of type byte, and 16-bit length of sequence and sequence of 8-byte names.</p>
<pre>./ff 'fact [ drop # 1 ] [ dup # 1 - fact * ] dup # 1 = if ;'
'F' 14 00 "fact" "q" 2 "drop" "#" 1 "q" 5 "dup" "#" 1... ";"</pre>


<h3>Machine code words</h3>

<pre>#* 48 0f af 06  48 8d 76 04  c3</pre>

<p>Word <code>*</code> associated with pointer to memory area holding raw bytes <code>48 0f</code>&hellip;</p>

<h3>Forth words</h3>

<pre>:fact [ drop 1 ] [ dup 1 - fact * ] dup 1 = if ;</pre>

<p>Word <code>fact</code> is associated with pointer to memory area holding vm execution prefix and 32-bit indexes and values.</p>

<pre>e8 aa aa aa aa [dup] [#] 1 [=] [q] 2 [drop] [#] 1 [q] 5 [dup] [#] 1 [-] [fact] [*] [dup] [#] 1 [=] [if] [;]</pre>

<h3>Data words</h3>

<pre>@data 11 22 33 44</pre>

<p>Word <code>d</code> is associated with pointer to memory area holding data execution prefix and raw bytes <code>11 22</code>&hellip;</p>

<pre>e8 bb bb bb bb 11 22 33 44</pre>

</body></html>
